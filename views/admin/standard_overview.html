{{extend 'layout.html'}}

<div class="container-fluid well">
    <div class="row">
        <div class="col-sm-12"><h1>Standards Overview</h1></div>
    </div>

    <div class="row">
        <div class="col-sm-12">

            <table class="table">
                {{for key in overview_data:}}
                <tr>
                    <td>
                        <h3>
                            <button class="btn btn-primary btn-xs btn-{{=key}}"
                                    data-toggle="collapse"
                                    data-target=".{{=str(key)}}collapsed">
                                <span class="glyphicon glyphicon-small glyphicon-folder-close"
                                   id ="{{=str(key)}}collapsed"></span>
                            </button>
                            Grade {{=key}}
                        </h3>
                    </td>
                </tr>
                {{for id in content_area_all[key]:}}
                <tr class="collapse {{=str(key)}}collapsed">
                    <td>{{=content_area_all[key][id]}}</td>
                    <td>
                        <button type="button"
                                class="btn btn-primary btn-xs"
                                onclick="window.location.href='{{=URL('admin', 'detail', args = [key,id])}}'">
                            Details
                        </button>
                    </td>
                    <td>
                        <button type="button"
                                class="btn btn-primary btn-xs"
                                onclick="window.location.href='{{=URL('admin', 'pdf_overview', args = [key,id])}}'">
                            Download PDF
                        </button>
                    </td>
                </tr>
                {{pass}}
                {{pass}}

            </table>

        </div>
    </div>
</div>

{{block page_js}}
<script>
 /* This is probably unnecessary, as bootstrap has this functionality built-in. */
 $('.{{=str(key)}}collapsed').on('shown.bs.collapse', function () {
     $("#{{=str(key)}}collapsed").removeClass("glyphicon-folder-close").addClass("glyphicon-folder-open");
 });

 $('.{{=str(key)}}collapsed').on('hidden.bs.collapse', function () {
     $("#{{=str(key)}}collapsed").removeClass("glyphicon-folder-open").addClass("glyphicon-folder-close");
 });

 $().ready(function() {
     $("button").removeClass("btn-default");
 });
</script>
{{end}}
